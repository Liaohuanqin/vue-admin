<template>
<section>
    <slot name="beforeAll"></slot>

    <list-info
        :field_list="field_list"
        :filters="filters"
        :operators="operators"
        v-bind="listConfig"
        ref="listInfo"
    >
        <template slot="beforeFilters" slot-scope="scope">
            <operators
                :operators="staticOperators"
                :data="scope.data"
                :formData="scope.formData"
                :field_list="field_list"
                @update="refreshListData"
                size=""
            ></operators>
        </template>
        <template slot="filters" slot-scope="scope">
            <slot name="filters" :formData="scope.formData"></slot>
        </template>
        <template slot="afterFilters" slot-scope="scope">
            <slot name="afterFilters" :data="scope.data" :formData="scope.formData"></slot>
        </template>
    </list-info>
    <slot name="afterAll"></slot>
</section>
</template>

<script>
import listInfo from "@/components/common/listInfo.vue"
import operators from "@/components/common/operators/operators.vue"

export default{
    inheritAttrs:true,
    components:{
        listInfo,
        operators,
    },
    props:{
        field_list:{
            type:Object,
            default:function(){
                return {};
            }
        },
        staticOperators:{
            type:Array,
            default:function(){
                return [];
            },
        },
        filters:{
            type:Array,
            default:function(){
                return [];
            }
        },
        listConfig:{
            type:Object,
            default:function(){
                return {};
            },
        },
        operators:{
            type:Array,
            default:function(){
                return [];
            }
        }
    },
    methods:{
        refreshListData(){
            this.$refs.listInfo && this.$refs.listInfo.getListInfo();
        }
    }
}

</script>